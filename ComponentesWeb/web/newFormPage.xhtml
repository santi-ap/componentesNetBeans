<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>New Form</title> 
    </h:head>
    <body>

        <!--//////////////////////////////////////////Menu/////////////////////////////////////////////////////////////-->

        <!--//////////////////////////////////////////Menu End/////////////////////////////////////////////////////////////-->


        <!--//////////////////////////////////////////Name/////////////////////////////////////////////////////////////-->

        <!--//////////////////////////////////////////Name end/////////////////////////////////////////////////////////////-->


        <!--//////////////////////////////////////////Sign Out/////////////////////////////////////////////////////////////-->

        <!--//////////////////////////////////////////Sign Out End/////////////////////////////////////////////////////////////-->




        <!--////////////////////////////////////////// FORM THAT HOLDS THE ADD QUESTION BUTTON AND THE NEW QUESTION AREA /////////////////////////////////////////////////////////////-->
        <h:form id="form" >
            <div class="ui-g">
                <div class="ui-g-1" style="background-color: red">
                    <!--//////////////////////////////////////////Add Question Button/////////////////////////////////////////////////////////////-->
                    <p:growl id="messages" showDetail="true"/>

                    <p:menuButton value="Add Question" style="margin-top:130%;">
                        <p:menuitem value="Multiple Choice" action="#{newFormController.addMultiple}"  update="form" icon="pi pi-save"/>
                        <p:menuitem value="Single Choice" action="#{newFormController.addSingle}" update="form" icon="pi pi-refresh"/>
                        <p:menuitem value="Text" action="#{newFormController.addText}" update="form" icon="pi pi-refresh"/>
                        <p:menuitem value="Date" action="#{newFormController.addDate}" update="form" icon="pi pi-refresh"/>
                    </p:menuButton>

                    <!--//////////////////////////////////////////Add Question Button End/////////////////////////////////////////////////////////////-->
                </div>
                <div class="ui-g-11" style="background-color: blue">
                    <!--////////////////////////////////////////// NEW QUESTION SCROLL_PANEL AREA /////////////////////////////////////////////////////////////-->
                    <p:scrollPanel id="newQuestionScrollPanel" mode="native" style="width:99%;height:75vh;padding:5px 5px 5px 5px;margin:10% 10% 0% 0%;">

                        <p:dataList var="newQuestion"  value="#{newFormController.testForm.questionList}" emptyMessage="Add a new question" type="definition" style="width:100%;">
                            <!--////////////////////////////////////////// QUESTION AREA /////////////////////////////////////////////////////////////-->
                            <p:growl id="msgs" showDetail="true" />
                            <p:panel id="newQuestionPanel" header="#{newQuestion.id}" closable="true" closeSpeed="500" widgetVar="panel" style="height:300px; ">

                                <p:ajax event="close" listener="#{newFormController.onClose}" update="msgs" />

                                <p:inputText style="width:99%;" placeholder="Type question here"/>
                                <!--////////////////////////////////////////// POSSIBLE ANSWERS AREA /////////////////////////////////////////////////////////////-->
                                <p:scrollPanel id="newAnswerScrollPanel" mode="native" style="width:99%;height:25vh;padding:5px 5px 5px 5px;margin:1% 10% 0% 0%;">
                                    
                                    <!--////////////////////////////////////////// TEXT ANSWER /////////////////////////////////////////////////////////////-->
                                    <p:inputText id="answerText" placeholder="Texto" style ="height:20vh;width:50%" rendered="#{newFormController.checkRendered(newQuestion, 'answerText')}"/>
                                    <!--////////////////////////////////////////// DATE ANSWER /////////////////////////////////////////////////////////////-->
                                    <div style="z-index: 0; background-color: orchid" > 
                                        
                                     <p:outputLabel for="datePicker" value="Date: " rendered="#{newFormController.checkRendered(newQuestion, 'answerDate')}"/>
                                     <p:datePicker id="datePicker" showIcon="true" style="margin: 1% 10% 0% 0%;"  rendered="#{newFormController.checkRendered(newQuestion, 'answerDate')}"/>
                                     
                                    </div>
                                    <!--////////////////////////////////////////// MULTIPLE OR SINGLE CHOICE ANSWER ANSWER /////////////////////////////////////////////////////////////-->
                                    <div style="background-color: olive">
                                    <p:commandButton value="+" style="font-size: 200%" action="#{newFormController.addChoice(newQuestion)}" update="newAnswerScrollPanel" rendered="#{newFormController.checkRendered(newQuestion, 'answerMultiple')}"/>
                                    <p:dataList var="newChoice"  value="#{newQuestion.choiceList}" emptyMessage="Add a new choice for your question" type="definition" style="width:100%;" rendered="#{newFormController.checkRendered(newQuestion, 'answerMultiple')}">
                                        
                                        <p:inputText style="width:99%;" placeholder="Type possible answer here"/>
                                    </p:dataList>    
                                    </div>    
                                </p:scrollPanel>
                                <!--////////////////////////////////////////// POSSIBLE ANSWERS AREA END /////////////////////////////////////////////////////////////-->
                            </p:panel>
                            <!--////////////////////////////////////////// QUESTION AREA END /////////////////////////////////////////////////////////////-->

                        </p:dataList>

                    </p:scrollPanel>
                    <!--////////////////////////////////////////// NEW QUESTION SCROLL_PANEL AREA END /////////////////////////////////////////////////////////////-->
                </div>
            </div>
        </h:form>
         <!--////////////////////////////////////////// FORM THAT HOLDS THE ADD QUESTION BUTTON AND THE NEW QUESTION AREA END /////////////////////////////////////////////////////////////-->
         
    </body>
</html>
