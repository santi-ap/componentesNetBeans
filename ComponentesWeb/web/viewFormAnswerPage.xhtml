<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> 
        <title>TODO supply a title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <script>
            $(document).ready(function () {
                $(".btn1").click(function () {
                    if ($(".answersList").is(":visible")) {
                        $(".answersList").hide();
                        $(".answerByPeson").show();

                    } else {
                        $(".answersList").show();
                        $(".answerByPeson").hide();
                    }
                });


            });
        </script>

        <script>
            function starter() {
                $(".answerByPeson").hide();
                $("#{viewFormAnswerController.init()}");
            }
        </script>

    </h:head>

    <body onload="starter()">
        <h:form>

            <p:outputLabel value="#{viewFormAnswerController.form.title}"/>


            <p:inputSwitch class="btn1" onLabel="♂♀" offLabel="%%"/> 
            <div></div> 
            <p:outputLabel value="#{answerService.getNumOfAnswerees(viewFormAnswerController.formId)}  people have answered this form" />

            <p:dataList var="question" id="tabla" class="answersList" value="#{viewFormAnswerController.form.questionList}" emptyMessage="Questions" type="definition" style="width:100%;">
                <p:outputLabel  value="#{question.question}" />

                <p:dataList var="choice"  value="#{viewFormAnswerController.generateResults(question)}"  type="definition" style="width:100%;">
                    <p:outputLabel  value="#{choice}" />
                </p:dataList>

            </p:dataList>

            <p:panel class="answerByPeson"  >
                <!--DATALIST THAT SHOWS EACH PERSON'S FORM ANSWERS-->
                <p:dataList var="answeree" value="#{viewFormAnswerController.answereeId}" emptyMessage="Questions" type="definition" style="width:100%;">
                    <p:panel>
                    Person # <p:outputLabel value="#{answeree}"/>
                    <!--DATALIST THAT SHOWS EACH QUESTION AND ITS ANSWER-->
                    <p:dataList var="question" value="#{viewFormAnswerController.form.questionList}">
                        <p:outputLabel value="#{question.question}"/>
                        <br></br>
                        <p:outputLabel value="#{viewFormAnswerController.getAnswerById(question, answeree)}"/>
                        
                    </p:dataList>
                    </p:panel>
                </p:dataList>
            </p:panel>
        </h:form>
    </body>
</html>
